"use strict";!function(){function e(){return"function"==typeof window.getMessage?window.getMessage.apply(null,arguments):"Не найдена функция <code>getMessage</code>, которая должна быть объявлена в глобальной области видимости в файле <code>check.js</code>"}function a(){var e=["img/logo-background-1.jpg","img/logo-background-2.jpg","img/logo-background-3.jpg"],a=document.querySelector(".upload"),o=Math.round(Math.random()*(e.length-1));a.style.backgroundImage="url("+e[o]+")"}function o(e,a){var o=!1;switch(e){case c.UPLOADING:a=a||"Кексограмим&hellip;";break;case c.ERROR:o=!0,a=a||'Неподдерживаемый формат файла<br> <a href="'+document.location+'">Попробовать еще раз</a>.'}return s.querySelector(".upload-message-container").innerHTML=a,s.classList.remove("invisible"),s.classList.toggle("upload-message-error",o),s}var n={GIF:"gif",JPEG:"jpeg",PNG:"png","SVG+XML":"svg+xml"},c={ERROR:0,UPLOADING:1,CUSTOM:2},r=new RegExp("^image/("+Object.keys(n).join("|").replace("+","\\+")+")$","i"),t=document.forms["upload-select-image"],s=document.querySelector(".upload-message");t.onchange=function(a){var t=a.target;if("upload-file"===t.id){var s=t.files[0].type.match(r),i=t.files[0].name;if(s){var g,l,u=s[1];switch(o(c.UPLOADING),u.toLowerCase()){case n.GIF:i.indexOf("animated.gif")>-1?(l=e(!0,20),g="Переданное GIF-изображение анимировано и содержит 20 кадров"!==l):(l=e(!1),g="Переданное GIF-изображение не анимировано"!==l);break;case n["SVG+XML"]:l=e(100,75),g="Переданное SVG-изображение содержит 100 объектов и 300 аттрибутов"!==l;break;case n.PNG:l=e([23,11,75,88,14]),g="Количество красных точек во всех строчках изображения: 211"!==l;break;case n.JPEG:l=e([10,2,8,15],[4,20,5,3]),g="Общая площадь артефактов сжатия: 165 пикселей"!==l}o(g?c.ERROR:c.UPLOADING,l+'<br><a href="'+document.location+'">Другое изображение</a>.')}else o(c.ERROR)}},a()}();